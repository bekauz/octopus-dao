(this["webpackJsonpoctopus-dao"]=this["webpackJsonpoctopus-dao"]||[]).push([[1],{160:function(e,t,n){},166:function(e,t){},214:function(e,t){},240:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),o=n(138),r=n.n(o),i=(n(160),n(83)),a=n(139),l=n(97),d=n(26),u=n(25),j=new a.a("rinkeby"),b=j.getBundleDropModule("0x9E92B1F2B0C7CE7497040ac89eCD2d032E4d01F7"),h=j.getTokenModule("0xcb4D31e042D6DaF220653D092D51b0Aa43f554ec"),O=function(){var e=Object(l.b)(),t=e.connectWallet,n=e.address,s=(e.error,e.provider);console.log("Connected with address:",n);var o=s?s.getSigner():void 0,r=Object(c.useState)(!1),a=Object(i.a)(r,2),O=a[0],f=a[1],m=Object(c.useState)(!1),x=Object(i.a)(m,2),g=x[0],p=x[1],v=Object(c.useState)({}),A=Object(i.a)(v,2),k=A[0],D=A[1],E=Object(c.useState)([]),M=Object(i.a)(E,2),S=M[0],C=M[1];Object(c.useEffect)((function(){O&&b.getAllClaimerAddresses("0").then((function(e){console.log("members addresses: ",e),C(e)})).catch((function(e){console.error("failed to retrieve member list",e)}))}),[O]),Object(c.useEffect)((function(){O&&h.getAllHolderBalances().then((function(e){console.log("holder amounts",e),D(e)})).catch((function(e){console.error("failed to retrieve token amounts",e)}))}),[O]);var N=Object(c.useMemo)((function(){return S.map((function(e){return{address:e,tokenAmount:d.a.utils.formatUnits(k[e]||0)}}))}),[S,k]);if(Object(c.useEffect)((function(){j.setProviderOrSigner(o)}),[o]),Object(c.useEffect)((function(){if(n)return b.balanceOf(n,"0").then((function(e){e.gt(0)?(f(!0),console.log("user has the membership NFT")):(f(!1),console.log("user does not have the membership NFT"))})).catch((function(e){f(!1),console.error("failed to get balance",e)}))}),[n]),!n)return Object(u.jsxs)("div",{className:"landing",children:[Object(u.jsx)("h1",{children:"Welcome to OctopusDAO"}),Object(u.jsx)("button",{onClick:function(){return t("injected")},className:"btn-hero",children:"Connect your wallet"})]});if(O)return Object(u.jsxs)("div",{className:"member-page",children:[Object(u.jsx)("h1",{children:"OctopusDAO Member Page"}),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Member List"}),Object(u.jsxs)("table",{className:"card",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Address"}),Object(u.jsx)("th",{children:"Token Amount"})]})}),Object(u.jsx)("tbody",{children:N.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:(t=e.address,"".concat(t.substring(0,6),"...").concat(t.substring(t.length-4)))}),Object(u.jsx)("td",{children:e.tokenAmount})]},e.address);var t}))})]})]})})]});return Object(u.jsxs)("div",{className:"mint-nft",children:[Object(u.jsx)("h1",{children:"Mint your free OctopusDAO Membership NFT"}),Object(u.jsx)("button",{disabled:g,onClick:function(){return p(!0),void b.claim("0",1).catch((function(e){p(!1),console.error("failed to claim",e)})).finally((function(){p(!1),f(!0),console.log("Sucessfully minted!"),console.log("See it on OpenSea: https://testnets.opensea.io/assets/".concat(b.address,"/0"))}))},children:g?"Minting...":"Mint your nft (FREE)"})]})};r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(l.a,{connectors:{injected:{}},supportedChainIds:[4],children:Object(u.jsx)("div",{className:"landing",children:Object(u.jsx)(O,{})})})}),document.getElementById("root"))}},[[240,2,3]]]);
//# sourceMappingURL=main.8bf49c10.chunk.js.map